<!DOCTYPE HTML>
<!--source https://jsfiddle.net/rtoal/wvp4scLL/-->

<style type="text/css">
    body {
        text-align: left;
    }


    #setting {
        float: left;
        text-align: left;
        line-height: 20px;
        font-size: 20px;
        color: #000000;
        font-weight: lighter;
        vertical-align: top;
        padding: 10px 20px 0px 10px;
    }

    #canvas {
        float: left;
        position: relative;
        background-color: #ccddcc;
        margin: 1em auto;
    }

    .ball {
        background-color: black;
        position: absolute;
        display: inline-block;
        border-radius: 50%;
    }
</style>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>負片後像AfterImage</title>
</head>

<body>
    <div id="setting">
        <h2>設定</h2>
        <hr>
        <div class="slidecontainer">
            <p>背景顏色: <span id="bgcolor_value"></span></p>
            <p><input type="range" min="0" max="255" value="50" class="slider" id="bgcolor_range"></p>
            <hr>

            <p>球的顏色R: <span id="ballcolor_value_r"></span></p>
            <p><input type="range" min="0" max="255" value="200" class="slider" id="ballcolor_range_r"></p>
            <p>球的顏色G: <span id="ballcolor_value_g"></span></p>
            <p><input type="range" min="0" max="255" value="200" class="slider" id="ballcolor_range_g"></p>
            <p>球的顏色B: <span id="ballcolor_value_b"></span></p>
            <p><input type="range" min="0" max="255" value="200" class="slider" id="ballcolor_range_b"></p>
            <hr>
            <p><a href="http://a-chien.blogspot.com" target="_blank" >阿簡生物筆記</a></p>

        </div>
    </div>
    <div id="canvas"></div>



    <script type="text/javascript">

        var canvas = {
            element: document.getElementById('canvas'),
            width: 500,
            height: 500,

            initialize: function () {
                this.element.style.width = this.width + 'px';
                this.element.style.height = this.height + 'px';
                this.element.style.backgroundColor = 'rgb(50,50,50)';




                document.body.appendChild(this.element);
            },

            changeColor: function (grayscale) {
                this.element.style.backgroundColor = 'rgb(' + grayscale + ',' + grayscale + ',' + grayscale + ')';
            },

        };


        //背景顏色
        var bgcolor_slider = document.getElementById("bgcolor_range");
        var bgcolor_value = document.getElementById("bgcolor_value");
        bgcolor_value.innerHTML = bgcolor_slider.value;

        //調整背景顏色
        bgcolor_slider.oninput = function () {
            bgcolor_value.innerHTML = this.value;
            canvas.changeColor(this.value);

        }


        //球的顏色
        var ballcolor_slider_r = document.getElementById("ballcolor_range_r");
        var ballcolor_slider_g = document.getElementById("ballcolor_range_g");
        var ballcolor_slider_b = document.getElementById("ballcolor_range_b");

        var ballcolor_value_r = document.getElementById("ballcolor_value_r");
        var ballcolor_value_g = document.getElementById("ballcolor_value_g");
        var ballcolor_value_b = document.getElementById("ballcolor_value_b");

        ballcolor_value_r.innerHTML = ballcolor_slider_r.value;
        ballcolor_value_g.innerHTML = ballcolor_slider_g.value;
        ballcolor_value_b.innerHTML = ballcolor_slider_b.value;

        //調整球的顏色
        ballcolor_slider_r.oninput = function () {
            ballcolor_value_r.innerHTML = this.value;
        }
        ballcolor_slider_g.oninput = function () {
            ballcolor_value_g.innerHTML = this.value;

        }
        ballcolor_slider_b.oninput = function () {
            ballcolor_value_b.innerHTML = this.value;
        }





        //定義中心點
        var center_x = canvas.width / 2;
        var center_y = canvas.height / 2;

        //定義距離中心的距離
        var dist = 200;

        //中央十字?


        var Ball = {
            create: function (color, dtheta) {
                var newBall = Object.create(this);
                newBall.color = color || 'rgb(' + ballcolor_slider_r.value + ',' + ballcolor_slider_g.value + ',' + ballcolor_slider_b.value + ')';
                newBall.dtheta = dtheta || 30;
                newBall.width = 70;
                newBall.height = 70;
                newBall.element = document.createElement('div');
                newBall.element.style.backgroundColor = color;
                newBall.element.style.width = newBall.width + 'px';
                newBall.element.style.height = newBall.height + 'px';
                newBall.element.className += ' ball';
                newBall.width = parseInt(newBall.element.style.width);
                newBall.height = parseInt(newBall.element.style.height);
                canvas.element.appendChild(newBall.element);
                return newBall;
            },
            moveTo: function (theta) {
                this.element.style.left = center_x - 35 + dist * Math.sin(theta * Math.PI / 180) + 'px';
                this.element.style.top = center_y - 35 + dist * Math.cos(theta * Math.PI / 180) + 'px';
            },
            changeDirectionIfNecessary: function (theta) {
                if (theta >= 360) {
                    theta = 0;
                }

            },
            draw: function (theta, r, g, b) {
                var color_r = r || ballcolor_slider_r.value;
                var color_g = g || ballcolor_slider_g.value;
                var color_b = b || ballcolor_slider_b.value;
                this.moveTo(theta);
                this.element.style.backgroundColor = 'rgb(' + color_r + ',' + color_g + ',' + color_b + ')';
                var ball = this;
                setTimeout(function () {
                    ball.changeDirectionIfNecessary(theta);
                    ball.draw(theta + ball.dtheta, r, g, b);
                }, 1000 / 30);
            }
        };

        canvas.initialize();
        var ball1 = Ball.create();
        var ball2 = Ball.create();
        var ball3 = Ball.create();
        var ball4 = Ball.create();
        var ball5 = Ball.create();
        var ball6 = Ball.create();
        var ball7 = Ball.create();
        var ball8 = Ball.create();
        var ball9 = Ball.create();
        var ball10 = Ball.create();
        var ball11 = Ball.create();

        ball1.draw(0);
        ball2.draw(30);
        ball3.draw(60);
        ball4.draw(90);
        ball5.draw(120);
        ball6.draw(150);
        ball7.draw(180);
        ball8.draw(210);
        ball9.draw(240);
        ball10.draw(270);
        ball11.draw(300);

    </script>

</body>

</html>